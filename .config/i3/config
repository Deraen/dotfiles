# i3 config file (v4)

# Dmenu
exec_always update-desktopfiles-list.sh
bindsym $mod+r exec --no-startup-id dmenu.sh
bindsym $mod+ctrl+r exec --no-startup-id dmenu_run

bindsym $mod+Shift+F12 exec --no-startup-id dspmgr.py && rndbg.sh
bindsym $mod+Shift+F11 exec togglecompton.sh

# Preferences
set $mod Mod4
set $bg #3C3B37

font pango:Ubuntu, Icons 8

# class                 border  backgr. text    indicator
client.focused          #4c7899 #304f66 #ffffff #184c73
client.focused_inactive #375870 #0c1319 #ffffff #484e50
client.unfocused        $bg     $bg     #888888 #292d2e
client.urgent           #2f343a #900000 #ffffff #900000

focus_follows_mouse no
workspace_auto_back_and_forth yes
floating_modifier $mod

hide_edge_borders both

# Launch
bindsym $mod+Return exec TERMINAL="urxvt.sh" i3-sensible-terminal
bindsym $mod+Shift+Return exec nautilus
bindsym $mod+Shift+Q kill

# change focus
bindsym $mod+j focus down
bindsym $mod+l focus right
bindsym $mod+h focus left
bindsym $mod+k focus up

bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

bindsym $mod+a focus parent
bindsym $mod+d focus child

# move focused window
bindsym $mod+Shift+J move down
bindsym $mod+Shift+L move right
bindsym $mod+Shift+H move left
bindsym $mod+Shift+K move up

bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

bindsym $mod+Ctrl+h resize shrink width 40 px or 4 ppt
bindsym $mod+Ctrl+l resize grow width 40 px or 4 ppt
bindsym $mod+Ctrl+j resize shrink height 40 px or 4 ppt
bindsym $mod+Ctrl+k resize grow height 40 px or 4 ppt

# layout
# <
bindcode $mod+94 split v
# >
bindcode $mod+shift+94 split h
bindsym $mod+Tab layout toggle all
bindsym $mod+f fullscreen
bindsym $mod+shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

bindsym $mod+c move scratchpad
bindsym $mod+v scratchpad show, floating disable
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

# Workspaces
set $www 1: WWW
set $irc 2: IRC
set $dev 3: DEV
set $comm §: COMM
set $music F1: MUSIC
set $video F2: VIDEO
set $steam F3: STEAM
set $downloads F4: DOWNLOADS

# Defaults for desktop computer
workspace "$irc" output DVI-D-0
workspace "$video" output DVI-D-1

# Defaults
# $ xprop
assign [class="Quasselclient"] → $irc
assign [class="Transmission-remote-gtk"] → $downloads
assign [class="Smplayer"] → $video
assign [class="Steam"] → $steam
assign [class="Spotify"] → $music
assign [class="HipChat"] → $comm
assign [class="Skype"] → $comm
# Flowdock
assign [instance="crx_ecfaiclpokecdjgdbnoogehobmmgalah"] → $comm
# IRCCloud
assign [instance="crx_pnpnebpkafjbaejjhkkaiandjbnbbbak"] → $irc
# Eclipse splashscreen
for_window [class="Java" title="^Eclipse( SDK )?$"] floating enable
# Incanter windows
for_window [title="^Incanter (Matrix|Dataset)"] floating enable

for_window [class="^(Google-chrome|Google-chrome-stable|X-www-browser)$"] border pixel 2
for_window [class="^(Quasselclient|Spotify)$"] border pixel 2
for_window [class="^(Eclipse|GVim)$"] border pixel 2
for_window [instance="jetbrains-idea-ce"] border pixel 2
for_window [class="^(URxvt|Termite|st-256color)$"] border pixel 2
for_window [class="Steam" title="^(Steam - .*|Friends)$"] floating enable
for_window [class="Gnome-screenshot"] floating enable

bindsym $mod+section workspace "$comm"
bindsym $mod+1 workspace "$www"
bindsym $mod+2 workspace "$irc"
bindsym $mod+3 workspace "$dev"
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10
bindsym $mod+F1 workspace "$music"
bindsym $mod+F2 workspace "$video"
bindsym $mod+F3 workspace "$steam"
bindsym $mod+F4 workspace "$downloads"

bindsym $mod+Shift+section move container to workspace "$comm"
bindsym $mod+Shift+exclam move container to workspace "$www"
bindsym $mod+Shift+quotedbl move container to workspace "$irc"
bindsym $mod+Shift+numbersign move container to workspace "$dev"
bindsym $mod+Shift+currency move container to workspace 4
bindsym $mod+Shift+percent move container to workspace 5
bindsym $mod+Shift+ampersand move container to workspace 6
bindsym $mod+Shift+slash move container to workspace 7
bindsym $mod+Shift+parenleft move container to workspace 8
bindsym $mod+Shift+parenright move container to workspace 9
bindsym $mod+Shift+equal move container to workspace 10
bindsym $mod+Shift+F1 move container to workspace "$music"
bindsym $mod+Shift+F2 move container to workspace "$video"
bindsym $mod+Shift+F3 move container to workspace "$steam"
bindsym $mod+Shift+F4 move container to workspace "$downloads"

# Move container/workspace to other output
bindsym $mod+Shift+x move container to output right
bindsym $mod+x move workspace to output right
# Switch all workspaces to next output
bindsym $mod+Ctrl+x exec i3-switch-all.py

# Scratchpad
for_window [instance="crx_mnfehgbmkapmjnhcnbodoamcioleeooe"] move scratchpad
bindsym $mod+F5 exec scratchpad.py "gtk-launch DevDocs" "crx_mnfehgbmkapmjnhcnbodoamcioleeooe"
for_window [class="Keepassx" title="^(KeePassX - Password Manager|.* - KeePassX)$"] move scratchpad
bindsym $mod+F6 exec scratchpad.py keepassx keepassx
for_window [instance="crx_mojepfklcankkmikonjlnidiooanmpbb"] move scratchpad
bindsym $mod+F7 exec scratchpad.py "gtk-launch Sunrise" "crx_mojepfklcankkmikonjlnidiooanmpbb"

# I3
bindsym $mod+Shift+C reload
bindsym $mod+Shift+R restart

# Spotify, pulseaudio
bindsym Mod1+Delete exec dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause
bindsym Mod1+Home exec dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous
bindsym Mod1+End exec dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next
bindsym Mod1+Page_Up exec ponymix unmute && ponymix -N increase 2 && pkill -RTMIN+1 i3blocks
bindsym Mod1+Page_Down exec ponymix unmute && ponymix -N decrease 2 && pkill -RTMIN+1 i3blocks
bindsym XF86AudioRaiseVolume exec ponymix unmute && ponymix -N increase 2 && pkill -RTMIN+1 i3blocks
bindsym XF86AudioLowerVolume exec ponymix unmute && ponymix -N decrease 2 && pkill -RTMIN+1 i3blocks
bindsym Mod1+Insert exec ponymix -N toggle && pkill -RTMIN+1 i3blocks
bindsym XF86AudioMute exec ponymix -N toggle && pkill -RTMIN+1 i3blocks

# Kernel 3.16 by default assumes DE takes care of backlight management
bindsym XF86MonBrightnessDown exec xbacklight - 5
bindsym XF86MonBrightnessUp exec xbacklight + 5

# Screenshots
bindsym Print exec gnome-screenshot
bindsym Mod1+Print exec gnome-screenshot -w
bindsym Ctrl+Print exec gnome-screenshot -i

bar {
  position top
  status_command i3blocks
  colors {
    background #000000
  }
}

exec --no-startup-id sleep 2 && transset -n i3bar 0.8
