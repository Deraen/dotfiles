#!/bin/bash

if [[ -f $HOME/.profile ]]; then
  # Why isn't this read already?
  source $HOME/.profile
fi

if [[ $(hostname -s) == "juho-desktop" ]]; then
  export WLR_NO_HARDWARE_CURSORS=1
fi

export QT_QPA_PLATFORM=wayland
export GDK_BACKEND=wayland
export XDG_CURRENT_DESKTOP=sway
export XDG_SESSION_DESKTOP=sway

systemctl --user import-environment DG_CURRENT_DESKTOP XDG_SESSION_DESKTOP QT_QPA_PLATFORM
hash dbus-update-activation-environment 2>/dev/null && dbus-update-activation-environment XDG_CURRENT_DESKTOP XDG_SESSION_DESKTOP

exec sway --unsupported-gpu "$@"
